<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hedgehog Bounce</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #f0f0f0;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
    <script>
        // Matter.js module aliases
        const Engine = Matter.Engine,
              Render = Matter.Render,
              World = Matter.World,
              Bodies = Matter.Bodies,
              Mouse = Matter.Mouse,
              MouseConstraint = Matter.MouseConstraint,
              Vector = Matter.Vector;

        // Create engine and renderer
        const engine = Engine.create();
        const world = engine.world;
        world.gravity.y = 0.8; // Slightly reduced gravity for floatier motion
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: '#f0f0f0'
            }
        });

        // Hedgehog images array
        const hedgehogImages = [
            'hg.png',
            'hg2.png',
            'hg5.png',
            'hg6.png',
            'hg7 (1).png',
            'hg7 (2).png'
        ];

        // Create hedgehogs with random images
        const hedgehogs = [];
        const numHedgehogs = 6; // One hedgehog per image
        for (let i = 0; i < numHedgehogs; i++) {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight / 2;
            const image = hedgehogImages[i % hedgehogImages.length]; // Assign each image
            const hedgehog = Bodies.circle(x, y, 30, {
                restitution: 0.9, // Bouncy collisions
                friction: 0.02,   // Reduced surface friction
                frictionAir: 0.01, // Reduced air friction for smoother motion
                render: {
                    sprite: {
                        texture: image,
                        xScale: 0.5,
                        yScale: 0.5
                    }
                }
            });
            hedgehogs.push(hedgehog);
            World.add(world, hedgehog);
        }

        // Add boundaries
        const ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight + 50, window.innerWidth, 100, { isStatic: true });
        const leftWall = Bodies.rectangle(-50, window.innerHeight / 2, 100, window.innerHeight, { isStatic: true });
        const rightWall = Bodies.rectangle(window.innerWidth + 50, window.innerHeight / 2, 100, window.innerHeight, { isStatic: true });
        const ceiling = Bodies.rectangle(window.innerWidth / 2, -50, window.innerWidth, 100, { isStatic: true });
        World.add(world, [ground, leftWall, rightWall, ceiling]);

        // Mouse interaction
        const mouse = Mouse.create(render.canvas);
        const mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: { visible: false }
            }
        });
        World.add(world, mouseConstraint);

        // Handle mouse clicks for jumping
        Matter.Events.on(mouseConstraint, 'mousedown', function(event) {
            const mousePosition = event.mouse.position;
            hedgehogs.forEach(hedgehog => {
                const distance = Math.sqrt(
                    Math.pow(mousePosition.x - hedgehog.position.x, 2) +
                    Math.pow(mousePosition.y - hedgehog.position.y, 2)
                );
                if (distance < 30) { // Clicked within hedgehog radius
                    const jumpForce = Vector.create(
                        (Math.random() - 0.5) * 0.01, // Slight random x component
                        -0.03 // Strong upward force
                    );
                    Matter.Body.applyForce(hedgehog, hedgehog.position, jumpForce);
                }
            });
        });

        // Apply random forces to keep hedgehogs moving
        Matter.Events.on(engine, 'beforeUpdate', function() {
            // Apply random force every 0.2 seconds (12 frames at 60 FPS)
            if (engine.timing.timestamp % 200 < 16.67) { // Approx 0.2s interval
                hedgehogs.forEach(hedgehog => {
                    const forceMagnitude = 0.004; // Increased for livelier motion
                    const force = Vector.create(
                        (Math.random() - 0.5) * forceMagnitude, // Random x direction
                        (Math.random() - 0.5) * forceMagnitude  // Random y direction
                    );
                    Matter.Body.applyForce(hedgehog, hedgehog.position, force);
                });
            }
        });

        // Run the engine and renderer
        Engine.run(engine);
        Render.run(render);

        // Handle window resize
        window.addEventListener('resize', () => {
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
            Matter.Body.setPosition(ground, { x: window.innerWidth / 2, y: window.innerHeight + 50 });
            Matter.Body.setPosition(leftWall, { x: -50, y: window.innerHeight / 2 });
            Matter.Body.setPosition(rightWall, { x: window.innerWidth + 50, y: window.innerHeight / 2 });
            Matter.Body.setPosition(ceiling, { x: window.innerWidth / 2, y: -50 });
        });
    </script>
</body>
</html>
