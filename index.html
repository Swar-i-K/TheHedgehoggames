<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hedgehog Bounce</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: Arial, sans-serif;
    }
    canvas {
      display: block;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      background: #ff6f61;
      color: white;
      border: none;
      border-radius: 5px;
    }
    button:hover {
      background: #e55a50;
    }
  </style>
</head>
<body>
  <button onclick="addHedgehogs()">Make it Rain!</button>
  <script>
    let hedgehogs = [];
    let hedgehogImg, ballImg;

    function preload() {
      // Placeholder URLs for images; replace with actual hedgehog and spiky ball images
      hedgehogImg = loadImage('https://via.placeholder.com/50?text=Hedgehog');
      ballImg = loadImage('https://via.placeholder.com/50?text=SpikyBall');
    }

    function setup() {
      createCanvas(windowWidth, windowHeight);
      for (let i = 0; i < 5; i++) {
        hedgehogs.push(new Hedgehog());
      }
    }

    function draw() {
      background(240);
      for (let hedgehog of hedgehogs) {
        hedgehog.update();
        hedgehog.display();
      }
    }

    function mousePressed() {
      for (let hedgehog of hedgehogs) {
        let d = dist(mouseX, mouseY, hedgehog.x, hedgehog.y);
        if (d < 25) {
          hedgehog.toggleState();
        }
      }
    }

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
    }

    function addHedgehogs() {
      for (let i = 0; i < 5; i++) {
        hedgehogs.push(new Hedgehog());
      }
    }

    class Hedgehog {
      constructor() {
        this.x = random(width);
        this.y = random(height);
        this.vx = random(-3, 3);
        this.vy = random(-3, 3);
        this.isBall = false;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;

        // Bounce off walls
        if (this.x < 25 || this.x > width - 25) {
          this.vx *= -1;
        }
        if (this.y < 25 || this.y > height - 25) {
          this.vy *= -1;
        }

        // Apply gravity when not in ball state
        if (!this.isBall) {
          this.vy += 0.1;
        }
      }

      display() {
        imageMode(CENTER);
        if (this.isBall) {
          image(ballImg, this.x, this.y, 50, 50);
        } else {
          image(hedgehogImg, this.x, this.y, 50, 50);
        }
      }

      toggleState() {
        this.isBall = !this.isBall;
        if (this.isBall) {
          this.vy = -5; // Small upward boost when curling
        }
      }
    }
  </script>
</body>
</html>
